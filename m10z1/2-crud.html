<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //  CRUD
      // READ - GET - multiple resources
      fetch("https://jsonplaceholder.typicode.com/posts")
        .then((response) => response.json())
        .then((posts) => console.log(posts))

      // READ - GET - single resource
      const id = 1
      fetch(`https://jsonplaceholder.typicode.com/posts/${id}`)
        .then((response) => response.json())
        .then((post) => console.log(post))

      // CREATE - POST/PUT
      const postToAdd = {
        author: "Mango",
        body: "hello world",
      }

      const options = {
        method: "POST",
        body: JSON.stringify(postToAdd),
        headers: {
          "Content-Type": "application/json; charset=UTF-8",
        },
      }

      fetch("https://jsonplaceholder.typicode.com/posts", options)
        .then((response) => response.json())
        .then((post) => console.log(post))

      // UPDATE - PATCH/PUT
      const patchBody = {
        id: 1,
        body: "CRUD is awesome",
      }

      const optionsPatch = {
        method: "PATCH",
        body: JSON.stringify(patchBody),
        headers: {
          "Content-Type": "application/json; charset=UTF-8",
        },
      }

      fetch(
        `https://jsonplaceholder.typicode.com/posts/${patchBody.id}`,
        optionsPatch
      )
        .then((response) => response.json())
        .then((post) => console.log(post))

      // DELETE - DELETE

      const postIdToDelete = 1
      fetch(`https://jsonplaceholder.typicode.com/posts/${postIdToDelete}`, {
        method: "DELETE",
      }).then((response) => {
        console.log(`post deleted ${response.status}`)
      })
    </script>
  </body>
</html>
